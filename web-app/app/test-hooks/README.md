# Hooks 测试页面

## 访问地址
- 本地: http://localhost:3000/test-hooks
- 移动端: http://192.168.1.101:3000/test-hooks

## 用途

### 开发工具
- 快速测试 3 个核心 Hooks 的功能
- 隔离环境调试手势交互问题
- 验证坐标转换逻辑

### 功能演示
- 展示如何正确使用 `useGesture` + `useMapTransform` + `useScratch`
- 作为新开发者的参考示例
- 文档化最佳实践

## 测试功能

### 1. 单指平移
- 单指拖动地图
- 观察顶部状态栏的 X/Y 坐标变化
- 模式应显示为 "pan"

### 2. 双指缩放
- 双指捏合/放大
- 观察 scale 值变化（0.5x - 4.0x）
- 验证高缩放级别下仍可拖动

### 3. 刮除功能
1. 点击 "🎯 聚焦" 按钮
2. 地图自动放大到中心雪场
3. 用手指在银色遮罩上滑动刮除
4. 刮开中心圆点后触发 confetti 动画
5. 2 秒后自动重置

## 状态栏说明

```
🧪 Hooks 测试          [mode]
┌─────┬────────┬────────┐
│ 3.0x│ X:-322 │ Y:-498 │ ← 当前变换状态
└─────┴────────┴────────┘
[🎯 聚焦] [🔄 重置]
```

- **mode**: 当前手势模式 (idle/pan/zoom/scratch)
- **X.Xx**: 当前缩放级别
- **X/Y**: 当前平移偏移量（像素）

## 何时使用

### 修改 Hooks 后
- 修改 `useGesture.ts` 后，在此页面验证手势识别
- 修改 `useMapTransform.ts` 后，测试缩放和边界限制
- 修改 `useScratch.ts` 后，测试刮除进度检测

### 调试 Bug
- 手势响应异常 → 检查 mode 状态切换
- 缩放后无法拖动 → 验证 scale-aware 边界计算
- 刮除不灵敏 → 调整 SCRATCH 常量参数

### 性能测试
- 快速拖动/缩放，观察是否卡顿
- 长时间交互，检查内存泄漏
- 移动端实测触控响应速度

## 与主页面的区别

| 特性 | 测试页面 | 主页面 |
|------|----------|--------|
| 雪场数量 | 1 个模拟数据 | 40+ 真实数据 |
| 背景地图 | 简单网格 | 日本地图轮廓 |
| 状态栏 | 精简版（调试用） | 完整 UI |
| localStorage | 不保存 | 保存访问记录 |

## 删除方法

如果不再需要，可以安全删除：
```bash
rm -rf app/test-hooks
```

主页面 (app/page.tsx) 完全独立，不会受到影响。
